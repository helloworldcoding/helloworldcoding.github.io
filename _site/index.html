<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>If not now,when ? &#8211; Hello world, Let's Coding!</title>
<meta name="description" content="Describe this nonsense.">
<meta name="keywords" content="Jekyll, theme, themes, responsive, blog, modern">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="If not now,when ?">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="http://localhost:4000/">
<meta property="og:site_name" content="Hello world, Let's Coding!">





<link rel="canonical" href="http://localhost:4000/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Hello world, Let's Coding! Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://localhost:4000/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://localhost:4000/images/guoguo.jpg" alt="Helloworldcoding photo" class="author-photo">
					<h4>Helloworldcoding</h4>
					<p>Do what you love to do,and make some change!</p>
				</li>
				<li><a href="http://localhost:4000/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:runningele@gmail.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				
				
				
				
				<li>
					<a href="https://github.com/helloworldcoding"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://localhost:4000/posts/">All Posts</a></li>
				<li><a href="http://localhost:4000/tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="http://localhost:4000/theme-setup/" >Theme Setup</a></li>
	  
	    
	    <li><a href="http://mademistakes.com" target="_blank">External Link</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="http://localhost:4000/images/abstract-1.jpg" alt="If not now,when ?">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Hello world, Let's Coding!</h1>
      <h2>If not now,when ?</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2019-01-22T00:00:00+08:00"><a href="http://localhost:4000/vim-some-skills/">January 22, 2019</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Helloworldcoding">Helloworldcoding</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/vim-some-skills/" rel="bookmark" title="Some Vim skills" itemprop="url">Some Vim skills</a></h1>
    
  </header>
  <div class="entry-content">
    <h4 id="编辑后发现需要root权限">编辑后，发现需要root权限</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:w ! sudo tee %
</code></pre></div></div>

<h4 id="做计算">做计算</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>insert模式，ctrl+r =3600*24*7
</code></pre></div></div>

<h4 id="查看字符ascii码16进制8进制">查看字符ascii码,16进制，8进制</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>common模式，ga 查看光标下的字符的ascii码	
</code></pre></div></div>

<h4 id="插入unicode字符">插入unicode字符</h4>
<h4 id="大小写转换">大小写转换</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~          将光标下的字母改变大小写
3m~         将光标位置开始的3个字母改变其大小写
g~~        改变当前行字母的大小写
U          将可视模式下选择的字母全改成大写字母
u          将可视模式下选择的字母全改成小写
gUU        将当前行的字母改成大写
3gUU       将从光标开始到下面3行字母改成大写
guu       将当前行的字母全改成小写
gUw       将光标下的单词改成大写。
guw       将光标下的单词改成小写。
</code></pre></div></div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2019-01-22T00:00:00+08:00"><a href="http://localhost:4000/php-unit-test-note2/">January 22, 2019</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Helloworldcoding">Helloworldcoding</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/php-unit-test-note2/" rel="bookmark" title="Dependence and Data Provider in PHPUnit" itemprop="url">Dependence and Data Provider in PHPUnit</a></h1>
    
  </header>
  <div class="entry-content">
    <h3 id="牛人的话翻译后">牛人的话(翻译后)</h3>

<p>Adrian Kuhn et.al:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>写单元测试是一个非常好的做法，帮助开发定位和修复bug，重构代码并作为测试软件的一个单元的文档。
为了能达到这个效果，单元测试要考虑到程序中所有路径。一个方法或函数通常只覆盖一个特殊的路径。
然而，一个测试方法并不是一个封闭的，独立的实体。通常在测试方法之间的隐式依赖，就藏在某个测试场景的实现中。
</code></pre></div></div>

<h3 id="test-dependencies">Test Dependencies</h3>

<ul>
  <li>producer: 返回值给其他方法使用的方法</li>
  <li>consumer: 依靠别的方法和它们的返回值的方法</li>
  <li>一个方法，可以兼顾这个两个角色</li>
  <li>consumer方法需要在方法注释中标注@depends testFunc</li>
  <li>一个consumer方法可以一个或多个@depends,当有多个@depends时，@depends的声明顺序就是consumer参数顺序
    <ul>
      <li>参数的传递，默认是引用传参</li>
      <li>@depends clone 就是深复制，传值传参</li>
      <li>@depends shallowClone 浅复制</li>
    </ul>
  </li>
  <li>consumer方法有多个@depends时，要确保这些producer方法要写在consumer的前面，不然就会出现skip</li>
</ul>

<p>代码如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MultipleDependenciesTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="k">function</span> <span class="nf">testProducerFirst</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertTrue</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
		<span class="k">return</span> <span class="s1">'first'</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="k">function</span> <span class="nf">testProducerSecond</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertTrue</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
		<span class="k">return</span> <span class="s1">'second'</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="sd">/**
	 * @depends testProducerFirst
	 * @depends testProducerSecond
	 */</span>
	<span class="k">public</span> <span class="k">function</span> <span class="nf">testConsumer</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="s1">'first'</span><span class="p">,</span> <span class="nv">$a</span><span class="p">);</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="s1">'second'</span><span class="p">,</span> <span class="nv">$b</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="data-providers">Data Providers</h3>

<ul>
  <li>某个方法的注释中用 <code>@dataProvider </code>这个特殊注释 标识了某个方法，则这个方法就是data provider
    <ul>
      <li>如<code>@dataProvider testFunc</code> testFunc就是data provider</li>
    </ul>
  </li>
  <li>data provider返回值必须要是n维数组(n&gt;=2),或可以迭代的对象(Iterator),并且这个对象每一次迭代都要返回一个数组</li>
  <li>测试方法的参数可以由一个或多个data provider 提供</li>
  <li>
    <p>当测试方法同时有@dataProvider和@depends时，@dataProvider的参数要先于@depends</p>
  </li>
  <li>demo</li>
</ul>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DependencyAndDataProviderComboTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="k">function</span> <span class="nf">provider</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="k">return</span> <span class="p">[[</span><span class="s1">'provider1'</span><span class="p">],</span> <span class="p">[</span><span class="s1">'provider2'</span><span class="p">]];</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="k">function</span> <span class="nf">testProducerFirst</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertTrue</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
		<span class="k">return</span> <span class="s1">'first'</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="k">function</span> <span class="nf">testProducerSecond</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertTrue</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
		<span class="k">return</span> <span class="s1">'second'</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="sd">/**
	 * @depends testProducerFirst
	 * @depends testProducerSecond
	 * @dataProvider provider
	 */</span>
	<span class="k">public</span> <span class="k">function</span> <span class="nf">testConsumer</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span>
			<span class="p">[</span><span class="s1">'provider1'</span><span class="p">,</span> <span class="s1">'first'</span><span class="p">,</span> <span class="s1">'second'</span><span class="p">],</span>
			<span class="nb">func_get_args</span><span class="p">()</span>
			<span class="sd">/**
			func_get_args()依次是
			['provider1', 'first', 'second'],
			['provider2', 'first', 'second']
			因为 provider迭代了两次，第一次返回['provider1'], 字符串'provider1'就传递给了testConsumer，作为第一个参数，
			**/</span>
		<span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2019-01-20T00:00:00+08:00"><a href="http://localhost:4000/php-unit-test/">January 20, 2019</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Helloworldcoding">Helloworldcoding</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/php-unit-test/" rel="bookmark" title="PHP unit test demo" itemprop="url">PHP unit test demo</a></h1>
    
  </header>
  <div class="entry-content">
    <h3 id="大牛的话翻译后">大牛的话(翻译后)</h3>

<p>Martin Fowler:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>无论什么时候,当你试着在print或其他debugger表达式里输入内容时，你应该把它写成一个测试用例
</code></pre></div></div>

<p>单元测试是代码质量的第一道关口。做好了单元测试，有利于尽早发现问题，解决问题。对CI/CD来说也是很重要的一个环节。当然，写单元测试会增加编写代码的工作量，所以一些公司或项目为了赶工期，单元测试就被忽略了，尽管大家都知道这个很重要。出来混，迟早要还的。欠下的，会加倍偿还。特别是随着产品的迭代，这个问题会逐渐凸显出来。</p>

<p>先来說一下php的单元测试,使用的是PHPUnit</p>
<h3 id="install">Install</h3>

<p>参考文档：https://phpunit.readthedocs.io/en</p>

<p>linux下简单的几个步骤如下</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$wget https://phar.phpunit.de/phpunit-7.5.2.phar
$chmod +x phpunit-7.5.2.phar
$sudo mv phpunit-7.5.2.phar /usr/local/bin/phpunit
$phpunit --version
PHPUnit 7.5.2 by Sebastian Bergmann and contributors.
</code></pre></div></div>

<h3 id="小试牛刀">小试牛刀</h3>

<p>创建一个文件比如test.php，内容如下</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">StackTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="k">function</span> <span class="nf">testPushAndPop</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="nv">$stack</span> <span class="o">=</span> <span class="p">[];</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$stack</span><span class="p">));</span>

		<span class="nb">array_push</span><span class="p">(</span><span class="nv">$stack</span><span class="p">,</span> <span class="s1">'foo'</span><span class="p">);</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="nv">$stack</span><span class="p">[</span><span class="nb">count</span><span class="p">(</span><span class="nv">$stack</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$stack</span><span class="p">));</span>

		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="nb">array_pop</span><span class="p">(</span><span class="nv">$stack</span><span class="p">));</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$stack</span><span class="p">));</span>
	<span class="p">}</span>

	<span class="sd">/**
	* @test
	*/</span>
	<span class="k">public</span> <span class="k">function</span> <span class="nf">num</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertSame</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'1'</span><span class="p">);</span>
		<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mf">1.0</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>执行测试phpunit ./test.php,返回结果如下</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PHPUnit 7.5.2 by Sebastian Bergmann and contributors.

F.                                                                  2 / 2 (100%)

Time: 183 ms, Memory: 10.00MB

There was 1 failure:

1) StackTest::testPushAndPop
Failed asserting that 0 is identical to 1.

/home/wm/code/php/phpunit/test.php:16

FAILURES!
Tests: 2, Assertions: 8, Failures: 1.
</code></pre></div></div>

<p>测试结果告诉我们，有两个测试方法，有8处断言，有一处失败，失败的原因是断言0和1相等，在代码的第16行。</p>

<p>我们修改16行为: $this-&gt;assertSame(0, count($stack));再执行测试</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PHPUnit 7.5.2 by Sebastian Bergmann and contributors.

..                                                                  2 / 2 (100%)

Time: 205 ms, Memory: 10.00MB

OK (2 tests, 8 assertions)
</code></pre></div></div>

<p>通过了测试^_^</p>

<h3 id="几点说明">几点说明</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.测试的类应该命名格式为ClassTest,大驼峰，而且以Test结尾,文件名和类名相同（我个人推测）
2.测试的类要继承PHPUnit\Framework\TestCase(大多数情况下)
3.测试的方法都要是public,声明一个方法是否是测试方法有如下两个方法
	- 方法名称的格式：test*
	- 或则在方法的注释中添加@test,来标识该方法是测试方法,如上
4.在测试方法里有很多断言方法,如上assertSame(),assertEquals()
5.出现失败后，就不会继续执行了。
</code></pre></div></div>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2019-01-18T00:00:00+08:00"><a href="http://localhost:4000/git-branch-model/">January 18, 2019</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Helloworldcoding">Helloworldcoding</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/git-branch-model/" rel="bookmark" title="A git branch model" itemprop="url">A git branch model</a></h1>
    
  </header>
  <div class="entry-content">
    <div class="mermaid">
	sequenceDiagram
		participant MasterG2
		participant Master
		participant Dev as F分支
		participant Bg0
		participant Bg2
		participant Test
		participant Release
		participant ReleaseG2

		Note over Master,Release:特性分支(f分支)开发流程 
		Master -&gt;&gt;+ Dev:开发拉f分支
		Dev --&gt;&gt; Dev: 开发自测
		loop 提测
			Dev -&gt;&gt; Test:F分支合并到Test分支
			Note over Test:是否有冲突
			alt 没有有冲突
				Note over Test :jenkins构建test环境
				Note over Test:验证测试环境
				alt 测试环境验证通过
					Note over Dev :F分支能否合并到Release分支
					alt 能合并
						Dev -&gt;&gt; Release:F分支合并到Release
						Note over Release :是否有冲突
						alt 没有冲突
							Note over Release :jenkins构建beta g0
							Note over Release:验证beta g0环境
							alt beta g0环境验证通过
								Note over Release: 积累一天
								Note over Release : jenkins构建prod g0
								Note over Release : 验证prod g0
								alt prod g0验证通过
									Release -&gt;&gt;- Dev : 删除所有的合并到Relase的F分支
									Release -&gt;&gt; Master : Release分支合并到Master
								else prod g0没有验证通过
									Release --&gt;&gt; Dev: prod g0验证没有通过，排查原因
								end
							else
								Release --&gt;&gt; Dev: beta g0测试不通过, 排查问题
							end
						else  有冲突
							Release --&gt;&gt; Dev : 开发同学先解决冲突,再次提测
						end
					else F分支不能合并到Release,原因：
						Note over Dev: 过了14:00
						Note over Dev: 距离灰度发布不足两天
						Note over Dev: 灰度发布期间
					end
				else 测试环境验证不通过
					Test --&gt;&gt; Dev:测试环境不通过,排查问题
				end
			else 有冲突
				Test --&gt;&gt; Dev :先解决冲突，再提测
			end
		end

		Note over Master,Release:Bg0分支开发流程(解决线上g0环境的bug)
		Note over Release: 灰度前后验证prod G0环境
		alt prod g0环境验证通过
		else prod g0验证不通过
			Master -&gt;&gt;+ Bg0 : 从Master拉取一个Bg0分支
			Bg0 --&gt;&gt; Bg0 : 开发自测
			Bg0 -&gt;&gt; Test : 合并到Test分支，构建测试环境，进行测试
			alt 成功
				Bg0 -&gt;&gt; Release: Bg0合并到Release分支，构建beta g0，并验证
				alt beta g0验证通过
					Note over Release:构建 prod g0,并验证
					alt prod g0通过
						Release -&gt;&gt; Master: 合并到Master分支,删除Bg0分支
						deactivate Bg0
					else  失败
						Release --&gt;&gt; Bg0 : prod g0未通过，排查原因，再提测
					end
				else 失败
					Release --&gt;&gt; Bg0: beta g0未通过，排查原因，再提测	
				end
			else 失败
				Test --&gt;&gt; Bg0: 查找原因，重新提测
			end
		end

		Note over MasterG2, ReleaseG2 : 全量发布
		Note right of ReleaseG2:prod环境全量发布
		Note over Release,ReleaseG2 :把prod g2的租户漂移到prod g0环境
		Release -&gt;&gt; ReleaseG2: Release分支合并到RelaseG2
		Note over ReleaseG2:jenkins构建prod g2环境
		Note over Release,ReleaseG2 :把大部分prod g0租户漂移回prod g2环境

		Note right of ReleaseG2:beta环境全量发布
		Note over Release,ReleaseG2 :把beta g2的租户漂移到beta g0环境
		Note over ReleaseG2:jenkins构建beta g2环境
		Note over Release,ReleaseG2 :把大部分beta g0租户漂移回beta g2环境

		ReleaseG2 -&gt;&gt; MasterG2 : 全量发布完成，ReleaseG2合并到MasterG2



		Note over MasterG2,ReleaseG2:Bg2分支开发流程(解决线上g2环境的bug)
		MasterG2 -&gt;&gt;+ Bg2: 拉取Bg2分支	
		Bg2 --&gt;&gt; Bg2: 开发自测
		Bg2 -&gt;&gt; Test: 合并到test分支
		Note over Test:jenkins构建测试环境，并验证
		alt 测试环境验证通过
			Bg2 -&gt;&gt; ReleaseG2 : 合并到ReleaseG2分支
			Note over ReleaseG2:jenkins构建beta g2环境
			Note over ReleaseG2:在beta g2环境验证
			alt beta g2环境验证通过
				Note over ReleaseG2: jenkins构建prod g2环境
				alt 解决了prod g2环境的bug
					ReleaseG2 -&gt;&gt; Release : 合并到Release
					ReleaseG2 -&gt;&gt; MasterG2: 合并到MasterG2,并删除Bg2分支
					deactivate Bg2
				else
					ReleaseG2 --&gt;&gt; Bg2: 没有解决，查原因，重新提测
				end 
			else beta g2环境验证不通过
				ReleaseG2 --&gt;&gt; Bg2: beta g2验证不通过，查原因，重新提测
			end
		else
			Test --&gt;&gt; Bg2:测试环境不通过，查原因，重新提测
		end
</div>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2019-01-17T00:00:00+08:00"><a href="http://localhost:4000/vim-command-model_1/">January 17, 2019</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Helloworldcoding">Helloworldcoding</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/vim-command-model_1/" rel="bookmark" title="Vim command mode--Ex(1)" itemprop="url">Vim command mode--Ex(1)</a></h1>
    
  </header>
  <div class="entry-content">
    <p>最早，现有ed，ed为ex之父，ex为vi之父，而vi为vim之父 —- The Old Testament of Unix</p>

<p>这些早期的Unix编辑器，依旧可以在vim中找到它们的影子，他们没有消失，只是换了一个方式存在。</p>

<p>我打算挖一坑，来說一下命令行模式，来看一下vim身体里流淌着多少它的祖先ex(行编辑器)的血液。</p>

<p>在普通模式下，按下<code>:</code>就会进入命令行模式，和shell下的命令行很相似;输入一条命令，然后回车执行。按下<code>Esc</code>键就可以回到普通模式。这些在命令行模式下执行的命令，又可以称为Ex命令。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">常见命令</th>
      <th style="text-align: left">用途说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">:edit</td>
      <td style="text-align: left">编辑一个文件，editk可以简写为e</td>
    </tr>
    <tr>
      <td style="text-align: left">:write</td>
      <td style="text-align: left">写文件</td>
    </tr>
    <tr>
      <td style="text-align: left">:tabnew</td>
      <td style="text-align: left">创建一个tab</td>
    </tr>
    <tr>
      <td style="text-align: left">:prev/:next</td>
      <td style="text-align: left">当用vim一次打开多个文件(如：vim a.txt b.txt)后，可以用他们来回切换文件</td>
    </tr>
    <tr>
      <td style="text-align: left">:bprev/:bnext</td>
      <td style="text-align: left">当打开多个缓冲区后，可以用他们来回切换缓冲区，不过我习惯<code>ctrl</code>+6来回切换最近两个缓冲区</td>
    </tr>
    <tr>
      <td style="text-align: left">:[range]delete [x]</td>
      <td style="text-align: left">删除指定范围的行到寄存器[x]中,delete可以简写为d</td>
    </tr>
    <tr>
      <td style="text-align: left">:[range]yank [x]</td>
      <td style="text-align: left">复制指定范围的行到寄存器[x]中,yank可以简写为y</td>
    </tr>
    <tr>
      <td style="text-align: left">:[line]put [x]</td>
      <td style="text-align: left">把寄存器x的内容，粘贴到指定行的后面,put不能简写</td>
    </tr>
    <tr>
      <td style="text-align: left">:[range]copy {address}</td>
      <td style="text-align: left">把指定范围的行复制到{address}指定的行之下,copy可以简写为co或t</td>
    </tr>
    <tr>
      <td style="text-align: left">:[range]move {address}</td>
      <td style="text-align: left">把指定范围的行移动到{address}指定的行之下,move可简写为m</td>
    </tr>
    <tr>
      <td style="text-align: left">:[range]join</td>
      <td style="text-align: left">把指定范围内的行连接起来，成为一行，<code>J</code>也可以起连接行的作用(当前行和下一行）</td>
    </tr>
    <tr>
      <td style="text-align: left">:[range]normal {commands}</td>
      <td style="text-align: left">对指定范围内的每一行执行普通模式的命令{commands}</td>
    </tr>
    <tr>
      <td style="text-align: left">:[range]substitute/{pattern}/{string}/{flags}</td>
      <td style="text-align: left">把指定范围内的行出现的{pattern}匹配的地方替换为{string}，substitute 可以简写为s(vim的正则替换，我先挖个坑，后面再填上)</td>
    </tr>
    <tr>
      <td style="text-align: left">:[range]global/{pattern}/[cmd]</td>
      <td style="text-align: left">把指定范围内的行匹配{pattern}的所有行之下Ex命令{cmd}，这个特性还要进一步挖掘</td>
    </tr>
  </tbody>
</table>

<p>range的写法：
	- 一个数字如23,34;代表指定的行
	- 两个数字逗号分割: 2,5  代表从第2到第5行
	- num,.  从第num行到当前行，比如我们要从第7行删除所有内容，我们先按G,光标会移动到最后一行，然后输入 :7,. d</p>

<p>总之，Ex命令可以一次执行，多处修改。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    

    
    
      <li><strong class="current-page">1</strong></li>
    

    
    

    
    
    

    
      
        
        
        
        <li><a href="http://localhost:4000/page2/">2</a></li>
      
    

    
    

    
      <li><a href="http://localhost:4000/page3/">3</a></li>
    

    
    
      <li><a href="http://localhost:4000/page2/" class="btn">Next</a></li>
    
  </ul>
</div>


</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2019 Helloworldcoding. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>






<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-132764148-1"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-132764148-1');
</script>



          

</body>
</html>